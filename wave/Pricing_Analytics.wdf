["{\"nodes\":{\"Compute_Manager_Unique\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"name\":\"UniqueUserName\",\"saqlExpression\":\"case when isDuplicate is null then 'Name' else 'Name' + \\\" (\\\" +'Username'+ \\\")\\\" end\",\"type\":\"Text\"},{\"name\":\"UserTenure\",\"precision\":8,\"saqlExpression\":\"daysBetween(toDate(CreatedDate_sec_epoch), now())\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"Compute_Unique_Name\"]},\"Flatten_Hierarchy_Grouping\":{\"action\":\"flatten\",\"parameters\":{\"includeSelfId\":true,\"multiField\":{\"isSystemField\":false,\"label\":\"Hierarchy_RoleNames\",\"name\":\"Hierarchy_RoleNames\"},\"parentField\":\"ParentRole.DeveloperName\",\"pathField\":{\"isSystemField\":false,\"label\":\"Hierarchy_RoleNamesPath\",\"name\":\"Hierarchy_RoleNamesPath\"},\"selfField\":\"DeveloperName\"},\"sources\":[\"Flatten_ParentName\"]},\"Join_OpportunityRecordType\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"RecordTypeId\"],\"relationship\":\"RecordType\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\"]},\"sources\":[\"Extract_Opportunity\",\"Extract_RecordTypes\"]},\"Extract_QuoteLineItems\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"SBQQ__AdditionalDiscount__c\"},{\"name\":\"SBQQ__Discount__c\"},{\"name\":\"SBQQ__BillingFrequency__c\"},{\"name\":\"SBQQ__BillingType__c\"},{\"name\":\"SBQQ__CustomerTotal__c\"},{\"name\":\"SBQQ__CustomerPrice__c\"},{\"name\":\"SBQQ__EffectiveQuantity__c\"},{\"name\":\"Name\"},{\"name\":\"SBQQ__ListTotal__c\"},{\"name\":\"SBQQ__ListPrice__c\"},{\"name\":\"SBQQ__NetTotal__c\"},{\"name\":\"SBQQ__NetPrice__c\"},{\"name\":\"SBQQ__OriginalPrice__c\"},{\"name\":\"SBQQ__ProductFamily__c\"},{\"name\":\"SBQQ__ProductName__c\"},{\"name\":\"SBQQ__Quantity__c\"},{\"name\":\"Id\"},{\"name\":\"SBQQ__RegularTotal__c\"},{\"name\":\"SBQQ__RegularPrice__c\"},{\"name\":\"SBQQ__Renewal__c\"},{\"name\":\"SBQQ__TotalDiscountRate__c\"},{\"name\":\"SBQQ__TotalDiscountAmount__c\"},{\"name\":\"SBQQ__UpgradedQuantity__c\"},{\"name\":\"SBQQ__Quote__c\"},{\"defaultValue\":\"-999\",\"name\":\"Additional_Discount_Calc__c\"}],\"object\":\"SBQQ__QuoteLine__c\"}},\"Extract_Opportunity\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Amount\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"name\":\"CloseDate\"},{\"name\":\"IsClosed\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"name\":\"CreatedDate\"},{\"name\":\"ForecastCategoryName\"},{\"name\":\"LeadSource\"},{\"name\":\"Name\"},{\"name\":\"NextStep\"},{\"name\":\"Id\"},{\"name\":\"Type\"},{\"name\":\"Probability\"},{\"name\":\"StageName\"},{\"name\":\"IsWon\"},{\"name\":\"AccountId\"},{\"name\":\"OwnerId\"},{\"name\":\"RecordTypeId\"},{\"name\":\"Competitor__c\"}],\"object\":\"Opportunity\"}},\"Filter_PrimaryQuotes\":{\"action\":\"filter\",\"parameters\":{\"filter\":\"SBQQ__Quote__r.SBQQ__Primary__c:EQ:true\"},\"sources\":[\"Join_Quote_LineItem\"]},\"Flatten_ParentName\":{\"action\":\"flatten\",\"parameters\":{\"includeSelfId\":true,\"multiField\":{\"isSystemField\":false,\"label\":\"RoleNames\",\"name\":\"RoleNames\"},\"parentField\":\"ParentRole.DeveloperName\",\"pathField\":{\"isSystemField\":false,\"label\":\"RoleNamesPath\",\"name\":\"RoleNamesPath\"},\"selfField\":\"DeveloperName\"},\"sources\":[\"Augment_ParentName\"]},\"Extract_RecordTypes\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Name\"},{\"name\":\"Id\"}],\"object\":\"RecordType\"}},\"Augment_ParentName\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"ParentRoleId\"],\"relationship\":\"ParentRole\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"DeveloperName\",\"ParentRoleId\"]},\"sources\":[\"Flatten_UserRole\",\"Extract_UserRole\"]},\"Extract_Account\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"AccountSource\"},{\"name\":\"Type\"},{\"name\":\"AnnualRevenue\"},{\"name\":\"BillingCountry\"},{\"name\":\"BillingState\"},{\"name\":\"NumberOfEmployees\"},{\"name\":\"Industry\"},{\"name\":\"PhotoUrl\"}],\"object\":\"Account\"}},\"Extract_User\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"FirstName\"},{\"name\":\"Name\"},{\"name\":\"LastName\"},{\"name\":\"Username\"},{\"name\":\"CompanyName\"},{\"name\":\"UserRoleId\"},{\"name\":\"Id\"},{\"name\":\"SmallPhotoUrl\"},{\"firstDayOfWeek\":0,\"fiscalMonthOffset\":0,\"name\":\"CreatedDate\"}],\"object\":\"User\"}},\"Register_Pricing\":{\"action\":\"register\",\"parameters\":{\"label\":\"Pricing\",\"name\":\"Pricing\"},\"sources\":[\"Join_Quote_Account\"]},\"ComputePricingScore\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"name\":\"Pricing_Score\",\"precision\":7,\"saqlExpression\":\"case when 'Additional_Discount_Calc__c' == -999 then -1 else coalesce('Additional_Discount_Calc__c'/'SBQQ__TotalDiscountRate__c',1) end\",\"scale\":6,\"type\":\"Numeric\"},{\"name\":\"IsScored\",\"saqlExpression\":\"case when 'Additional_Discount_Calc__c' == -999 then \\\"false\\\" else \\\"true\\\" end\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Filter_PrimaryQuotes\"]},\"Join_User_Quote\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SBQQ__Quote__r.SBQQ__SalesRep__c\"],\"relationship\":\"SBQQ__Quote__r.SBQQ__SalesRep__r\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"Username\",\"UserRoleId\",\"UniqueUserName\",\"UserTenure\",\"SmallPhotoUrl\",\"Role.Name\",\"Role.DeveloperName\",\"Role.Roles\",\"Role.RolePath\",\"Role.ParentRoleId\",\"Role.ParentRole.Name\",\"Role.ParentRole.DeveloperName\",\"Role.RoleNames\",\"Role.RoleNamesPath\",\"Role.Hierarchy_RoleNames\"]},\"sources\":[\"ComputePricingScore\",\"User_with_Roles\"]},\"Join_Quote_LineItem\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SBQQ__Quote__c\"],\"relationship\":\"SBQQ__Quote__r\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"SBQQ__CustomerDiscount__c\",\"SBQQ__AdditionalDiscountAmount__c\",\"SBQQ__AverageCustomerDiscount__c\",\"SBQQ__BillingCountry__c\",\"SBQQ__BillingName__c\",\"SBQQ__BillingState__c\",\"SBQQ__BillingFrequency__c\",\"SBQQ__CustomerAmount__c\",\"SBQQ__DaysQuoteOpen__c\",\"SBQQ__ListAmount__c\",\"SBQQ__MarkupRate__c\",\"SBQQ__NetAmount__c\",\"SBQQ__Primary__c\",\"SBQQ__SubscriptionTerm__c\",\"Name\",\"Id\",\"SBQQ__RegularAmount__c\",\"SBQQ__Status__c\",\"SBQQ__TargetCustomerAmount__c\",\"SBQQ__TotalCustomerDiscountAmount__c\",\"SBQQ__Type__c\",\"SBQQ__SalesRep__c\",\"SBQQ__Opportunity2__c\"]},\"sources\":[\"Extract_QuoteLineItems\",\"Extract_Quote\"]},\"Extract_Quote\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"SBQQ__CustomerDiscount__c\"},{\"name\":\"SBQQ__AdditionalDiscountAmount__c\"},{\"name\":\"SBQQ__AverageCustomerDiscount__c\"},{\"name\":\"SBQQ__BillingCountry__c\"},{\"name\":\"SBQQ__BillingName__c\"},{\"name\":\"SBQQ__BillingState__c\"},{\"name\":\"SBQQ__BillingFrequency__c\"},{\"name\":\"SBQQ__CustomerAmount__c\"},{\"name\":\"SBQQ__DaysQuoteOpen__c\"},{\"name\":\"SBQQ__ExpirationDate__c\"},{\"name\":\"SBQQ__ListAmount__c\"},{\"name\":\"SBQQ__MarkupRate__c\"},{\"name\":\"SBQQ__NetAmount__c\"},{\"name\":\"SBQQ__Primary__c\"},{\"name\":\"Name\"},{\"name\":\"Id\"},{\"name\":\"SBQQ__RegularAmount__c\"},{\"name\":\"SBQQ__Status__c\"},{\"name\":\"SBQQ__SubscriptionTerm__c\"},{\"name\":\"SBQQ__TargetCustomerAmount__c\"},{\"name\":\"SBQQ__TotalCustomerDiscountAmount__c\"},{\"name\":\"SBQQ__Type__c\"},{\"name\":\"SBQQ__SalesRep__c\"},{\"name\":\"SBQQ__Opportunity2__c\"}],\"object\":\"SBQQ__Quote__c\"}},\"Extract_UserRole\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"Id\"},{\"name\":\"Name\"},{\"name\":\"DeveloperName\"},{\"name\":\"ParentRoleId\"}],\"object\":\"UserRole\"}},\"User_with_Roles\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"UserRoleId\"],\"relationship\":\"Role\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"DeveloperName\",\"Roles\",\"RolePath\",\"ParentRoleId\",\"ParentRole.Name\",\"ParentRole.DeveloperName\",\"RoleNames\",\"Hierarchy_RoleNames\",\"RoleNamesPath\"]},\"sources\":[\"Compute_Manager_Unique\",\"Flatten_Hierarchy_Grouping\"]},\"Compute_Unique_Name\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"description\":\"isDuplicate\",\"expression\":{\"offset\":\"next()\",\"sourceField\":\"Id\"},\"label\":\"isDuplicate\",\"name\":\"isDuplicate\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"Id\"}],\"partitionBy\":[\"Name\"]},\"sources\":[\"Extract_User\"]},\"Join_Quote_Opportunity\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SBQQ__Quote__r.SBQQ__Opportunity2__c\"],\"relationship\":\"SBQQ__Quote__r.SBQQ__Opportunity2__r\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Amount\",\"Id\",\"CloseDate\",\"IsClosed\",\"ForecastCategoryName\",\"LeadSource\",\"Name\",\"NextStep\",\"Type\",\"Probability\",\"StageName\",\"IsWon\",\"AccountId\",\"OwnerId\",\"RecordTypeId\",\"RecordType.Name\",\"OpportunityAge\",\"Competitor__c\"]},\"sources\":[\"Join_User_Quote\",\"ComputeOpportunityAge\"]},\"ComputeOpportunityAge\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Opportunity Age\",\"name\":\"OpportunityAge\",\"precision\":8,\"saqlExpression\":\"case when IsClosed == \\\"false\\\" then daysBetween(toDate(CreatedDate_sec_epoch), now()) else daysBetween(toDate(CreatedDate_sec_epoch),toDate(CloseDate_sec_epoch)) end\",\"scale\":0,\"type\":\"Numeric\"}],\"mergeWithSource\":true},\"sources\":[\"Join_OpportunityRecordType\"]},\"Join_Quote_Account\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"SBQQ__Quote__r.SBQQ__Opportunity2__r.AccountId\"],\"relationship\":\"SBQQ__Quote__r.SBQQ__Opportunity2__r.Account\",\"rightKey\":[\"Id\"],\"rightSelect\":[\"Name\",\"AccountSource\",\"Type\",\"AnnualRevenue\",\"BillingCountry\",\"BillingState\",\"NumberOfEmployees\",\"Industry\",\"PhotoUrl\"]},\"sources\":[\"Join_Quote_Opportunity\",\"Extract_Account\"]},\"Flatten_UserRole\":{\"action\":\"flatten\",\"parameters\":{\"multiField\":{\"isSystemField\":false,\"label\":\"Roles\",\"name\":\"Roles\"},\"parentField\":\"ParentRoleId\",\"pathField\":{\"isSystemField\":false,\"label\":\"RolePath\",\"name\":\"RolePath\"},\"selfField\":\"Id\"},\"sources\":[\"Extract_UserRole\"]}}}",null]